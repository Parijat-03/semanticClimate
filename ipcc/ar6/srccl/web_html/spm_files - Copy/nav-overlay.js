(function($){function nav_overlay(item,options){this.item=$(item);var defaults={elements:{overlay:$('#nav-overlay'),trigger:$('#nav-overlay-trigger'),close_btn:$('#nav-overlay-close')},open_fn:null,close_fn:null,logging:false};this.options=$.extend(true,defaults,options);this.init();}
nav_overlay.prototype={init:function(){var plugin_instance=this;var plugin_settings=plugin_instance.options;var plugin_elements=plugin_settings.elements;if(plugin_settings.logging==true){console.log('nav overlay init');}
plugin_elements.trigger.click(function(e){e.preventDefault();if($('body').hasClass('nav-overlay-open')){plugin_instance.hide_overlay();}else{plugin_instance.show_overlay();}});plugin_elements.close_btn.click(function(e){e.preventDefault();plugin_instance.hide_overlay();});$('body').keypress(function(e){if($('body').hasClass('nav-overlay-open')&&e.which==27){plugin_instance.hide_overlay();}});},show_overlay:function(fn_options){var plugin_instance=this;var plugin_item=this.item;var plugin_settings=plugin_instance.options;var plugin_elements=plugin_settings.elements;var defaults={};var settings=$.extend(true,defaults,fn_options);$('body').addClass('nav-overlay-open');if(typeof(plugin_settings.open_fn)=='function'){plugin_settings.open_fn.call(this);}},hide_overlay:function(fn_options){var plugin_instance=this;var plugin_item=this.item;var plugin_settings=plugin_instance.options;var plugin_elements=plugin_settings.elements;var defaults={};var settings=$.extend(true,defaults,fn_options);$('body').removeClass('nav-overlay-open');if(typeof(plugin_settings.close_fn)=='function'){plugin_settings.close_fn.call(this);}}}
$.fn.nav_overlay=function(opt){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){var item=$(this);var instance=item.data('nav_overlay');if(!instance){item.data('nav_overlay',new nav_overlay(this,opt));}else{if(typeof opt==='string'){instance[opt].apply(instance,args);}}});}}(jQuery));